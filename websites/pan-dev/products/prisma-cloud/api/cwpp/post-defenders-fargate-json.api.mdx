---
id: post-defenders-fargate-json
title: "Generate a Protected JSON Fargate Task Definition"
description: "Returns a protected Fargate task definition given an unprotected task definition."
sidebar_label: "Generate a Protected JSON Fargate Task Definition"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: prisma-cloud/api/cwpp/prisma-cloud-compute-api
custom_edit_url: null
hide_send_button: true
show_extensions: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import Heading from "@theme/Heading";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Generate a Protected JSON Fargate Task Definition</h1>

<MethodEndpoint method={"post"} path={"/api/v33.00/defenders/fargate.json"}></MethodEndpoint>



```
x-prisma-cloud-target-env: {"permission":"manageDefenders"}
```



Returns a protected Fargate task definition given an unprotected task definition.

### cURL Request
Refer to the following example cURL command:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.json`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/json' \
  -X POST \
  --data-binary "@unprotected.json"
  --output protected.json \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.json?consoleaddr=<HOSTNAME>&defenderType=appEmbedded"
```
Refer to the following example cURL command that accepts the task definition in JSON format for a CloudFormation template:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.json`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/json' \
  -X POST \
  --data-binary "@unprotected.json"
  --output protected.json \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.json?cloudFormation=true&consoleaddr=<console_address>&filestemMonitoring=false&interpreter=&project=Central+Console"
```

### cURL Response
New Protected task will be in `protected.json`

## Request

<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"description":"ConsoleAddr is the remote console address.\n","in":"query","name":"consoleaddr","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderType is the type of the defender to create the install bundle for.\n","in":"query","name":"defenderType","schema":{"description":"Type is the type to be given at startup","enum":[["none","docker","dockerWindows","containerdWindows","swarm","daemonset","serverLinux","serverWindows","cri","fargate","appEmbedded","tas","tasWindows","serverless","ecs"]],"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"Interpreter is a custom interpreter set by the user to run the fargate defender entrypoint script.\n","in":"query","name":"interpreter","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"CloudFormation indicates if the given fargate task definition is in Cloud Formation format.\n","in":"query","name":"cloudFormation","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"FilesystemMonitoring is the filesystem monitoring flag.\n","in":"query","name":"filesystemMonitoring","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"ExtractEntrypoint indicates if entrypoint will be extracted automatically.\n","in":"query","name":"extractEntrypoint","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryType is the registry type for fetching image details needed to create fargate task definition (e.g., dockerhub).\n","in":"query","name":"registryType","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryCredentialID of the credentials in the credentials store to use for authenticating with the registry.\n","in":"query","name":"registryCredentialID","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImage is the full path to the Defender image, if not specified Prisma's private registry is used.\n","in":"query","name":"defenderImage","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImagePullSecret is the name of the secret required to pull the Defender image from private registry.\n","in":"query","name":"defenderImagePullSecret","schema":{"type":"string"}}}></ParamsItem></ul></div></details><MimeTabs className={"openapi-tabs__mime"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem name={"property name*"} required={false} schemaName={"string (string)"} qualifierMessage={undefined} schema={{"type":"string","title":"string"}} collapsible={false} discriminator={false}></SchemaItem></ul></details></TabItem></MimeTabs><div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>

FargateTask represents the generic fargate task AWS template

</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem name={"property name*"} required={false} schemaName={"string (string)"} qualifierMessage={undefined} schema={{"type":"string","title":"string"}} collapsible={false} discriminator={false}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"default"} value={"default"}><div></div><div></div></TabItem></ApiTabs></div></div>
      