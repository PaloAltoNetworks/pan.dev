---
id: post-defenders-fargate-yaml
title: "Generate a Protected YAML Fargate Task Definition"
description: "Returns a protected Fargate task definition for a CloudFormation YAML template given an unprotected task definition."
sidebar_label: "Generate a Protected YAML Fargate Task Definition"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: prisma-cloud/api/cwpp/prisma-cloud-compute-api
custom_edit_url: null
hide_send_button: true
show_extensions: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import Heading from "@theme/Heading";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Generate a Protected YAML Fargate Task Definition</h1>

<MethodEndpoint method={"post"} path={"/api/v33.00/defenders/fargate.yaml"}></MethodEndpoint>



```
x-prisma-cloud-target-env: {"permission":"manageDefenders"}
```



Returns a protected Fargate task definition for a CloudFormation YAML template given an unprotected task definition.

### cURL Request
Refer to the following example cURL command that accepts the task definition in YAML format for a CloudFormation template:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.yaml`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/yaml' \
  -X POST \
  --data-binary "@unprotected.yaml"
  --output protected.yaml \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.yaml?cloudFormation=true&consoleaddr=<console_address>&filestemMonitoring=false&interpreter=&project=Central+Console"
```

New Protected task will be in `protected.yaml`

## Request

<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"description":"ConsoleAddr is the remote console address.\n","in":"query","name":"consoleaddr","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderType is the type of the defender to create the install bundle for.\n","in":"query","name":"defenderType","schema":{"description":"Type is the type to be given at startup","enum":[["none","docker","dockerWindows","containerdWindows","swarm","daemonset","serverLinux","serverWindows","cri","fargate","appEmbedded","tas","tasWindows","serverless","ecs"]],"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"Interpreter is a custom interpreter set by the user to run the fargate defender entrypoint script.\n","in":"query","name":"interpreter","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"CloudFormation indicates if the given fargate task definition is in Cloud Formation format.\n","in":"query","name":"cloudFormation","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"FilesystemMonitoring is the filesystem monitoring flag.\n","in":"query","name":"filesystemMonitoring","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"ExtractEntrypoint indicates if entrypoint will be extracted automatically.\n","in":"query","name":"extractEntrypoint","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryType is the registry type for fetching image details needed to create fargate task definition (e.g., dockerhub).\n","in":"query","name":"registryType","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryCredentialID of the credentials in the credentials store to use for authenticating with the registry.\n","in":"query","name":"registryCredentialID","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImage is the full path to the Defender image, if not specified Prisma's private registry is used.\n","in":"query","name":"defenderImage","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImagePullSecret is the name of the secret required to pull the Defender image from private registry.\n","in":"query","name":"defenderImagePullSecret","schema":{"type":"string"}}}></ParamsItem></ul></div></details><div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div></div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem","paddingBottom":".5rem"}}>Array [</div></li><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

integer

</div><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem"}}>]</div></li></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"[\n  0\n]"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"default"} value={"default"}><div></div><div></div></TabItem></ApiTabs></div></div>
      