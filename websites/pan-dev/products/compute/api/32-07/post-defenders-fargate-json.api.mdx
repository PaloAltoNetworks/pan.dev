---
id: post-defenders-fargate-json
title: "Generate a Protected JSON Fargate Task Definition"
description: "Returns a protected Fargate task definition given an unprotected task definition."
sidebar_label: "Generate a Protected JSON Fargate Task Definition"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: compute/api/32-07/prisma-cloud-compute-api
custom_edit_url: null
show_extensions: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import Heading from "@theme/Heading";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Generate a Protected JSON Fargate Task Definition</h1>

<MethodEndpoint method={"post"} path={"/api/v32.07/defenders/fargate.json"}></MethodEndpoint>



```
x-prisma-cloud-target-env: {"permission":"manageDefenders"}
```



Returns a protected Fargate task definition given an unprotected task definition.

### cURL Request
Refer to the following example cURL command:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.json`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/json' \
  -X POST \
  --data-binary "@unprotected.json"
  --output protected.json \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.json?consoleaddr=<HOSTNAME>&defenderType=appEmbedded"
```
Refer to the following example cURL command that accepts the task definition in JSON format for a CloudFormation template:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.json`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/json' \
  -X POST \
  --data-binary "@unprotected.json"
  --output protected.json \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.json?cloudFormation=true&consoleaddr=<console_address>&filestemMonitoring=false&interpreter=&project=Central+Console"
```

### cURL Response
New Protected task will be in `protected.json`

## Request

<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"description":"ConsoleAddr is the remote console address.\n","in":"query","name":"consoleaddr","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderType is the type of the defender to create the install bundle for.\n","in":"query","name":"defenderType","schema":{"description":"Type is the type to be given at startup","enum":[["none","docker","dockerWindows","containerdWindows","swarm","daemonset","serverLinux","serverWindows","cri","fargate","appEmbedded","tas","tasWindows","serverless","ecs"]],"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"Interpreter is a custom interpreter set by the user to run the fargate defender entrypoint script.\n","in":"query","name":"interpreter","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"CloudFormation indicates if the given fargate task definition is in Cloud Formation format.\n","in":"query","name":"cloudFormation","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"FilesystemMonitoring is the filesystem monitoring flag.\n","in":"query","name":"filesystemMonitoring","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"ExtractEntrypoint indicates if entrypoint will be extracted automatically.\n","in":"query","name":"extractEntrypoint","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryType is the registry type for fetching image details needed to create fargate task definition (e.g., dockerhub).\n","in":"query","name":"registryType","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryCredentialID of the credentials in the credentials store to use for authenticating with the registry.\n","in":"query","name":"registryCredentialID","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImage is the full path to the Defender image, if not specified Prisma's private registry is used.\n","in":"query","name":"defenderImage","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImagePullSecret is the name of the secret required to pull the Defender image from private registry.\n","in":"query","name":"defenderImagePullSecret","schema":{"type":"string"}}}></ParamsItem></ul></div></details><MimeTabs className={"openapi-tabs__mime"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem name={"property name*"} required={false} schemaName={"string (string)"} qualifierMessage={undefined} schema={{"type":"string","title":"string"}} collapsible={false} discriminator={false}></SchemaItem></ul></details></TabItem></MimeTabs><div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>

FargateTask represents the generic fargate task AWS template

</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem name={"property name*"} required={false} schemaName={"string (string)"} qualifierMessage={undefined} schema={{"type":"string","title":"string"}} collapsible={false} discriminator={false}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"default"} value={"default"}><div></div><div></div></TabItem></ApiTabs></div></div>
      