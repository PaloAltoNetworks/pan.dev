---
id: post-defenders-fargate-yaml
title: "Generate a Protected YAML Fargate Task Definition"
description: "Returns a protected Fargate task definition for a CloudFormation YAML template given an unprotected task definition."
sidebar_label: "Generate a Protected YAML Fargate Task Definition"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: compute/api/prisma-cloud-compute-api
custom_edit_url: null
hide_send_button: true
show_extensions: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import Heading from "@theme/Heading";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Generate a Protected YAML Fargate Task Definition</h1>

<MethodEndpoint method={"post"} path={"/api/v33.00/defenders/fargate.yaml"}></MethodEndpoint>



```
x-prisma-cloud-target-env: {"permission":"manageDefenders"}
```



Returns a protected Fargate task definition for a CloudFormation YAML template given an unprotected task definition.

### cURL Request
Refer to the following example cURL command that accepts the task definition in YAML format for a CloudFormation template:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.yaml`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/yaml' \
  -X POST \
  --data-binary "@unprotected.yaml"
  --output protected.yaml \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.yaml?cloudFormation=true&consoleaddr=<console_address>&filestemMonitoring=false&interpreter=&project=Central+Console"
```

New Protected task will be in `protected.yaml`

## Request

<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"description":"ConsoleAddr is the remote console address.\n","in":"query","name":"consoleaddr","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderType is the type of the defender to create the install bundle for.\n","in":"query","name":"defenderType","schema":{"description":"Type is the type to be given at startup","enum":[["none","docker","dockerWindows","containerdWindows","swarm","daemonset","serverLinux","serverWindows","cri","fargate","appEmbedded","tas","tasWindows","serverless","ecs"]],"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"Interpreter is a custom interpreter set by the user to run the fargate defender entrypoint script.\n","in":"query","name":"interpreter","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"CloudFormation indicates if the given fargate task definition is in Cloud Formation format.\n","in":"query","name":"cloudFormation","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"FilesystemMonitoring is the filesystem monitoring flag.\n","in":"query","name":"filesystemMonitoring","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"ExtractEntrypoint indicates if entrypoint will be extracted automatically.\n","in":"query","name":"extractEntrypoint","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryType is the registry type for fetching image details needed to create fargate task definition (e.g., dockerhub).\n","in":"query","name":"registryType","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryCredentialID of the credentials in the credentials store to use for authenticating with the registry.\n","in":"query","name":"registryCredentialID","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImage is the full path to the Defender image, if not specified Prisma's private registry is used.\n","in":"query","name":"defenderImage","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImagePullSecret is the name of the secret required to pull the Defender image from private registry.\n","in":"query","name":"defenderImagePullSecret","schema":{"type":"string"}}}></ParamsItem></ul></div></details><div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div></div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem","paddingBottom":".5rem"}}>Array [</div></li><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

integer

</div><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem"}}>]</div></li></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"[\n  0\n]"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"default"} value={"default"}><div></div><div></div></TabItem></ApiTabs></div></div>
      