---
id: post-defenders-fargate-json
title: "Generate a Protected JSON Fargate Task Definition"
description: "Returns a protected Fargate task definition given an unprotected task definition."
sidebar_label: "Generate a Protected JSON Fargate Task Definition"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: compute/api/31-02/prisma-cloud-compute-api
custom_edit_url: null
hide_send_button: true
show_extensions: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import Heading from "@theme/Heading";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Generate a Protected JSON Fargate Task Definition</h1>

<MethodEndpoint method={"post"} path={"/api/v31.02/defenders/fargate.json"}></MethodEndpoint>



```
x-prisma-cloud-target-env: {"permission":"manageDefenders","saas":true,"self-hosted":true}
x-public: true
```



Returns a protected Fargate task definition given an unprotected task definition.

### cURL Request
Refer to the following example cURL command:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.json`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/json' \
  -X POST \
  --data-binary "@unprotected.json"
  --output protected.json \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.json?consoleaddr=<HOSTNAME>&defenderType=appEmbedded"
```
Refer to the following example cURL command that accepts the task definition in JSON format for a CloudFormation template:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.json`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/json' \
  -X POST \
  --data-binary "@unprotected.json"
  --output protected.json \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.json?cloudFormation=true&consoleaddr=<console_address>&filestemMonitoring=false&interpreter=&project=Central+Console"
```

### cURL Response
New Protected task will be in `protected.json`

## Request

<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"description":"ConsoleAddr is the remote console address.\n","in":"query","name":"consoleaddr","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderType is the type of the defender to create the install bundle for.\n","in":"query","name":"defenderType","schema":{"description":"Type is the type to be given at startup","enum":[["none","docker","dockerWindows","containerdWindows","swarm","daemonset","serverLinux","serverWindows","cri","fargate","appEmbedded","tas","tasWindows","serverless","ecs"]],"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"Interpreter is a custom interpreter set by the user to run the fargate defender entrypoint script.\n","in":"query","name":"interpreter","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"CloudFormation indicates if the given fargate task definition is in Cloud Formation format.\n","in":"query","name":"cloudFormation","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"FilesystemMonitoring is the filesystem monitoring flag.\n","in":"query","name":"filesystemMonitoring","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"ExtractEntrypoint indicates if entrypoint will be extracted automatically.\n","in":"query","name":"extractEntrypoint","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryType is the registry type for fetching image details needed to create fargate task definition (e.g., dockerhub).\n","in":"query","name":"registryType","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryCredentialID of the credentials in the credentials store to use for authenticating with the registry.\n","in":"query","name":"registryCredentialID","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImage is the full path to the Defender image, if not specified Prisma's private registry is used.\n","in":"query","name":"defenderImage","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImagePullSecret is the name of the secret required to pull the Defender image from private registry.\n","in":"query","name":"defenderImagePullSecret","schema":{"type":"string"}}}></ParamsItem></ul></div></details><MimeTabs className={"openapi-tabs__mime"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem name={"property name*"} required={false} schemaName={"string (string)"} qualifierMessage={undefined} schema={{"type":"string","title":"string"}} collapsible={false} discriminator={false}></SchemaItem></ul></details></TabItem></MimeTabs><div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>

FargateTask represents the generic fargate task AWS template

</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem name={"property name*"} required={false} schemaName={"string (string)"} qualifierMessage={undefined} schema={{"type":"string","title":"string"}} collapsible={false} discriminator={false}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"default"} value={"default"}><div></div><div></div></TabItem></ApiTabs></div></div>
      