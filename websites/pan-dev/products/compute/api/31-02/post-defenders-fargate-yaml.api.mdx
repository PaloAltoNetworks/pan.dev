---
id: post-defenders-fargate-yaml
title: "Generate a Protected YAML Fargate Task Definition"
description: "Returns a protected Fargate task definition for a CloudFormation YAML template given an unprotected task definition."
sidebar_label: "Generate a Protected YAML Fargate Task Definition"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: compute/api/31-02/prisma-cloud-compute-api
custom_edit_url: null
hide_send_button: true
show_extensions: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import Heading from "@theme/Heading";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Generate a Protected YAML Fargate Task Definition</h1>

<MethodEndpoint method={"post"} path={"/api/v31.02/defenders/fargate.yaml"}></MethodEndpoint>



```
x-prisma-cloud-target-env: {"permission":"manageDefenders","saas":true,"self-hosted":true}
x-public: true
```



Returns a protected Fargate task definition for a CloudFormation YAML template given an unprotected task definition.

### cURL Request
Refer to the following example cURL command that accepts the task definition in YAML format for a CloudFormation template:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.yaml`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/yaml' \
  -X POST \
  --data-binary "@unprotected.yaml"
  --output protected.yaml \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.yaml?cloudFormation=true&consoleaddr=<console_address>&filestemMonitoring=false&interpreter=&project=Central+Console"
```

New Protected task will be in `protected.yaml`

## Request

<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"description":"ConsoleAddr is the remote console address.\n","in":"query","name":"consoleaddr","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderType is the type of the defender to create the install bundle for.\n","in":"query","name":"defenderType","schema":{"description":"Type is the type to be given at startup","enum":[["none","docker","dockerWindows","containerdWindows","swarm","daemonset","serverLinux","serverWindows","cri","fargate","appEmbedded","tas","tasWindows","serverless","ecs"]],"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"Interpreter is a custom interpreter set by the user to run the fargate defender entrypoint script.\n","in":"query","name":"interpreter","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"CloudFormation indicates if the given fargate task definition is in Cloud Formation format.\n","in":"query","name":"cloudFormation","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"FilesystemMonitoring is the filesystem monitoring flag.\n","in":"query","name":"filesystemMonitoring","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"ExtractEntrypoint indicates if entrypoint will be extracted automatically.\n","in":"query","name":"extractEntrypoint","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryType is the registry type for fetching image details needed to create fargate task definition (e.g., dockerhub).\n","in":"query","name":"registryType","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryCredentialID of the credentials in the credentials store to use for authenticating with the registry.\n","in":"query","name":"registryCredentialID","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImage is the full path to the Defender image, if not specified Prisma's private registry is used.\n","in":"query","name":"defenderImage","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImagePullSecret is the name of the secret required to pull the Defender image from private registry.\n","in":"query","name":"defenderImagePullSecret","schema":{"type":"string"}}}></ParamsItem></ul></div></details><div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div></div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem","paddingBottom":".5rem"}}>Array [</div></li><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

integer

</div><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem"}}>]</div></li></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"[\n  0\n]"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"default"} value={"default"}><div></div><div></div></TabItem></ApiTabs></div></div>
      