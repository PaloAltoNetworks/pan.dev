---
id: post-defenders-fargate-json
title: "Generate a Protected JSON Fargate Task Definition"
description: "Returns a protected Fargate task definition given an unprotected task definition."
sidebar_label: "Generate a Protected JSON Fargate Task Definition"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: compute/api/32-04/prisma-cloud-compute-api
custom_edit_url: null
show_extensions: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import Heading from "@theme/Heading";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Generate a Protected JSON Fargate Task Definition</h1>

<MethodEndpoint method={"post"} path={"/api/v32.04/defenders/fargate.json"}></MethodEndpoint>



```
x-prisma-cloud-target-env: {"permission":"manageDefenders","saas":true,"self-hosted":true}
x-public: true
```



Returns a protected Fargate task definition given an unprotected task definition.

### cURL Request
Refer to the following example cURL command:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.json`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/json' \
  -X POST \
  --data-binary "@unprotected.json"
  --output protected.json \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.json?consoleaddr=<HOSTNAME>&defenderType=appEmbedded"
```
Refer to the following example cURL command that accepts the task definition in JSON format for a CloudFormation template:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.json`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/json' \
  -X POST \
  --data-binary "@unprotected.json"
  --output protected.json \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.json?cloudFormation=true&consoleaddr=<console_address>&filestemMonitoring=false&interpreter=&project=Central+Console"
```

### cURL Response
New Protected task will be in `protected.json`

## Request

<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"description":"ConsoleAddr is the remote console address.\n","in":"query","name":"consoleaddr","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderType is the type of the defender to create the install bundle for.\n","in":"query","name":"defenderType","schema":{"description":"Type is the type to be given at startup","enum":[["none","docker","dockerWindows","containerdWindows","swarm","daemonset","serverLinux","serverWindows","cri","fargate","appEmbedded","tas","tasWindows","serverless","ecs"]],"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"Interpreter is a custom interpreter set by the user to run the fargate defender entrypoint script.\n","in":"query","name":"interpreter","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"CloudFormation indicates if the given fargate task definition is in Cloud Formation format.\n","in":"query","name":"cloudFormation","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"FilesystemMonitoring is the filesystem monitoring flag.\n","in":"query","name":"filesystemMonitoring","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"ExtractEntrypoint indicates if entrypoint will be extracted automatically.\n","in":"query","name":"extractEntrypoint","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryType is the registry type for fetching image details needed to create fargate task definition (e.g., dockerhub).\n","in":"query","name":"registryType","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryCredentialID of the credentials in the credentials store to use for authenticating with the registry.\n","in":"query","name":"registryCredentialID","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImage is the full path to the Defender image, if not specified Prisma's private registry is used.\n","in":"query","name":"defenderImage","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImagePullSecret is the name of the secret required to pull the Defender image from private registry.\n","in":"query","name":"defenderImagePullSecret","schema":{"type":"string"}}}></ParamsItem></ul></div></details><MimeTabs className={"openapi-tabs__mime"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem name={"property name*"} required={false} schemaName={"string (string)"} qualifierMessage={undefined} schema={{"type":"string","title":"string"}} collapsible={false} discriminator={false}></SchemaItem></ul></details></TabItem></MimeTabs><div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>

FargateTask represents the generic fargate task AWS template

</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem name={"property name*"} required={false} schemaName={"string (string)"} qualifierMessage={undefined} schema={{"type":"string","title":"string"}} collapsible={false} discriminator={false}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"default"} value={"default"}><div></div><div></div></TabItem></ApiTabs></div></div>
      