---
id: post-defenders-fargate-yaml
title: "Generate a Protected YAML Fargate Task Definition"
description: "Returns a protected Fargate task definition for a CloudFormation YAML template given an unprotected task definition."
sidebar_label: "Generate a Protected YAML Fargate Task Definition"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: compute/api/32-04/prisma-cloud-compute-api
custom_edit_url: null
show_extensions: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import Heading from "@theme/Heading";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Generate a Protected YAML Fargate Task Definition</h1>

<MethodEndpoint method={"post"} path={"/api/v32.04/defenders/fargate.yaml"}></MethodEndpoint>



```
x-prisma-cloud-target-env: {"permission":"manageDefenders","saas":true,"self-hosted":true}
x-public: true
```



Returns a protected Fargate task definition for a CloudFormation YAML template given an unprotected task definition.

### cURL Request
Refer to the following example cURL command that accepts the task definition in YAML format for a CloudFormation template:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.yaml`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/yaml' \
  -X POST \
  --data-binary "@unprotected.yaml"
  --output protected.yaml \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.yaml?cloudFormation=true&consoleaddr=<console_address>&filestemMonitoring=false&interpreter=&project=Central+Console"
```

New Protected task will be in `protected.yaml`

## Request

<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"description":"ConsoleAddr is the remote console address.\n","in":"query","name":"consoleaddr","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderType is the type of the defender to create the install bundle for.\n","in":"query","name":"defenderType","schema":{"description":"Type is the type to be given at startup","enum":[["none","docker","dockerWindows","containerdWindows","swarm","daemonset","serverLinux","serverWindows","cri","fargate","appEmbedded","tas","tasWindows","serverless","ecs"]],"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"Interpreter is a custom interpreter set by the user to run the fargate defender entrypoint script.\n","in":"query","name":"interpreter","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"CloudFormation indicates if the given fargate task definition is in Cloud Formation format.\n","in":"query","name":"cloudFormation","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"FilesystemMonitoring is the filesystem monitoring flag.\n","in":"query","name":"filesystemMonitoring","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"ExtractEntrypoint indicates if entrypoint will be extracted automatically.\n","in":"query","name":"extractEntrypoint","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryType is the registry type for fetching image details needed to create fargate task definition (e.g., dockerhub).\n","in":"query","name":"registryType","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryCredentialID of the credentials in the credentials store to use for authenticating with the registry.\n","in":"query","name":"registryCredentialID","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImage is the full path to the Defender image, if not specified Prisma's private registry is used.\n","in":"query","name":"defenderImage","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImagePullSecret is the name of the secret required to pull the Defender image from private registry.\n","in":"query","name":"defenderImagePullSecret","schema":{"type":"string"}}}></ParamsItem></ul></div></details><div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div></div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem","paddingBottom":".5rem"}}>Array [</div></li><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

integer

</div><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem"}}>]</div></li></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"[\n  0\n]"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"default"} value={"default"}><div></div><div></div></TabItem></ApiTabs></div></div>
      