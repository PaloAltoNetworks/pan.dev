---
id: post-defenders-fargate-yaml
title: "Generate a Protected YAML Fargate Task Definition"
description: "Returns a protected Fargate task definition for a CloudFormation YAML template given an unprotected task definition."
sidebar_label: "Generate a Protected YAML Fargate Task Definition"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: compute/api/32-05/prisma-cloud-compute-api
custom_edit_url: null
show_extensions: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import Heading from "@theme/Heading";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Generate a Protected YAML Fargate Task Definition</h1>

<MethodEndpoint method={"post"} path={"/api/v32.05/defenders/fargate.yaml"}></MethodEndpoint>



```
x-prisma-cloud-target-env: {"permission":"manageDefenders","saas":true,"self-hosted":true}
x-public: true
```



Returns a protected Fargate task definition for a CloudFormation YAML template given an unprotected task definition.

### cURL Request
Refer to the following example cURL command that accepts the task definition in YAML format for a CloudFormation template:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.yaml`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/yaml' \
  -X POST \
  --data-binary "@unprotected.yaml"
  --output protected.yaml \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.yaml?cloudFormation=true&consoleaddr=<console_address>&filestemMonitoring=false&interpreter=&project=Central+Console"
```

New Protected task will be in `protected.yaml`

## Request

<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"description":"ConsoleAddr is the remote console address.\n","in":"query","name":"consoleaddr","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderType is the type of the defender to create the install bundle for.\n","in":"query","name":"defenderType","schema":{"description":"Type is the type to be given at startup","enum":[["none","docker","dockerWindows","containerdWindows","swarm","daemonset","serverLinux","serverWindows","cri","fargate","appEmbedded","tas","tasWindows","serverless","ecs"]],"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"Interpreter is a custom interpreter set by the user to run the fargate defender entrypoint script.\n","in":"query","name":"interpreter","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"CloudFormation indicates if the given fargate task definition is in Cloud Formation format.\n","in":"query","name":"cloudFormation","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"FilesystemMonitoring is the filesystem monitoring flag.\n","in":"query","name":"filesystemMonitoring","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"ExtractEntrypoint indicates if entrypoint will be extracted automatically.\n","in":"query","name":"extractEntrypoint","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryType is the registry type for fetching image details needed to create fargate task definition (e.g., dockerhub).\n","in":"query","name":"registryType","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryCredentialID of the credentials in the credentials store to use for authenticating with the registry.\n","in":"query","name":"registryCredentialID","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImage is the full path to the Defender image, if not specified Prisma's private registry is used.\n","in":"query","name":"defenderImage","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImagePullSecret is the name of the secret required to pull the Defender image from private registry.\n","in":"query","name":"defenderImagePullSecret","schema":{"type":"string"}}}></ParamsItem></ul></div></details><div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div></div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem","paddingBottom":".5rem"}}>Array [</div></li><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

integer

</div><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem"}}>]</div></li></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"[\n  0\n]"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"default"} value={"default"}><div></div><div></div></TabItem></ApiTabs></div></div>
      