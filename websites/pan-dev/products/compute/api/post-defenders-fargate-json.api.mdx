---
id: post-defenders-fargate-json
title: "Generate a Protected JSON Fargate Task Definition"
description: "Returns a protected Fargate task definition given an unprotected task definition."
sidebar_label: "Generate a Protected JSON Fargate Task Definition"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: compute/api/prisma-cloud-compute-api
custom_edit_url: null
hide_send_button: true
show_extensions: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import Heading from "@theme/Heading";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Generate a Protected JSON Fargate Task Definition</h1>

<MethodEndpoint method={"post"} path={"/api/v33.00/defenders/fargate.json"}></MethodEndpoint>



```
x-prisma-cloud-target-env: {"permission":"manageDefenders"}
```



Returns a protected Fargate task definition given an unprotected task definition.

### cURL Request
Refer to the following example cURL command:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.json`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/json' \
  -X POST \
  --data-binary "@unprotected.json"
  --output protected.json \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.json?consoleaddr=<HOSTNAME>&defenderType=appEmbedded"
```
Refer to the following example cURL command that accepts the task definition in JSON format for a CloudFormation template:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.json`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/json' \
  -X POST \
  --data-binary "@unprotected.json"
  --output protected.json \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.json?cloudFormation=true&consoleaddr=<console_address>&filestemMonitoring=false&interpreter=&project=Central+Console"
```

### cURL Response
New Protected task will be in `protected.json`

## Request

<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"description":"ConsoleAddr is the remote console address.\n","in":"query","name":"consoleaddr","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderType is the type of the defender to create the install bundle for.\n","in":"query","name":"defenderType","schema":{"description":"Type is the type to be given at startup","enum":[["none","docker","dockerWindows","containerdWindows","swarm","daemonset","serverLinux","serverWindows","cri","fargate","appEmbedded","tas","tasWindows","serverless","ecs"]],"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"Interpreter is a custom interpreter set by the user to run the fargate defender entrypoint script.\n","in":"query","name":"interpreter","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"CloudFormation indicates if the given fargate task definition is in Cloud Formation format.\n","in":"query","name":"cloudFormation","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"FilesystemMonitoring is the filesystem monitoring flag.\n","in":"query","name":"filesystemMonitoring","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"ExtractEntrypoint indicates if entrypoint will be extracted automatically.\n","in":"query","name":"extractEntrypoint","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryType is the registry type for fetching image details needed to create fargate task definition (e.g., dockerhub).\n","in":"query","name":"registryType","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryCredentialID of the credentials in the credentials store to use for authenticating with the registry.\n","in":"query","name":"registryCredentialID","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImage is the full path to the Defender image, if not specified Prisma's private registry is used.\n","in":"query","name":"defenderImage","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImagePullSecret is the name of the secret required to pull the Defender image from private registry.\n","in":"query","name":"defenderImagePullSecret","schema":{"type":"string"}}}></ParamsItem></ul></div></details><MimeTabs className={"openapi-tabs__mime"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem name={"property name*"} required={false} schemaName={"string (string)"} qualifierMessage={undefined} schema={{"type":"string","title":"string"}} collapsible={false} discriminator={false}></SchemaItem></ul></details></TabItem></MimeTabs><div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>

FargateTask represents the generic fargate task AWS template

</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem name={"property name*"} required={false} schemaName={"string (string)"} qualifierMessage={undefined} schema={{"type":"string","title":"string"}} collapsible={false} discriminator={false}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"default"} value={"default"}><div></div><div></div></TabItem></ApiTabs></div></div>
      