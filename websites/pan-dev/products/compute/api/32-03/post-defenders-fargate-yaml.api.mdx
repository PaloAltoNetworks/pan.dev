---
id: post-defenders-fargate-yaml
title: "Generate a Protected YAML Fargate Task Definition"
description: "Returns a protected Fargate task definition for a CloudFormation YAML template given an unprotected task definition."
sidebar_label: "Generate a Protected YAML Fargate Task Definition"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: compute/api/32-03/prisma-cloud-compute-api
custom_edit_url: null
show_extensions: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import Heading from "@theme/Heading";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Generate a Protected YAML Fargate Task Definition</h1>

<MethodEndpoint method={"post"} path={"/api/v32.03/defenders/fargate.yaml"}></MethodEndpoint>



```
x-prisma-cloud-target-env: {"permission":"manageDefenders","saas":true,"self-hosted":true}
x-public: true
```



Returns a protected Fargate task definition for a CloudFormation YAML template given an unprotected task definition.

### cURL Request
Refer to the following example cURL command that accepts the task definition in YAML format for a CloudFormation template:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.yaml`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/yaml' \
  -X POST \
  --data-binary "@unprotected.yaml"
  --output protected.yaml \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.yaml?cloudFormation=true&consoleaddr=<console_address>&filestemMonitoring=false&interpreter=&project=Central+Console"
```

New Protected task will be in `protected.yaml`

## Request

<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"description":"ConsoleAddr is the remote console address.\n","in":"query","name":"consoleaddr","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderType is the type of the defender to create the install bundle for.\n","in":"query","name":"defenderType","schema":{"description":"Type is the type to be given at startup","enum":[["none","docker","dockerWindows","containerdWindows","swarm","daemonset","serverLinux","serverWindows","cri","fargate","appEmbedded","tas","tasWindows","serverless","ecs"]],"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"Interpreter is a custom interpreter set by the user to run the fargate defender entrypoint script.\n","in":"query","name":"interpreter","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"CloudFormation indicates if the given fargate task definition is in Cloud Formation format.\n","in":"query","name":"cloudFormation","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"FilesystemMonitoring is the filesystem monitoring flag.\n","in":"query","name":"filesystemMonitoring","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"ExtractEntrypoint indicates if entrypoint will be extracted automatically.\n","in":"query","name":"extractEntrypoint","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryType is the registry type for fetching image details needed to create fargate task definition (e.g., dockerhub).\n","in":"query","name":"registryType","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryCredentialID of the credentials in the credentials store to use for authenticating with the registry.\n","in":"query","name":"registryCredentialID","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImage is the full path to the Defender image, if not specified Prisma's private registry is used.\n","in":"query","name":"defenderImage","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImagePullSecret is the name of the secret required to pull the Defender image from private registry.\n","in":"query","name":"defenderImagePullSecret","schema":{"type":"string"}}}></ParamsItem></ul></div></details><div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div></div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem","paddingBottom":".5rem"}}>Array [</div></li><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

integer

</div><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem"}}>]</div></li></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"[\n  0\n]"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"default"} value={"default"}><div></div><div></div></TabItem></ApiTabs></div></div>
      