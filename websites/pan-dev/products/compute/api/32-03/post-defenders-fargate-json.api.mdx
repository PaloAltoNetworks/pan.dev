---
id: post-defenders-fargate-json
title: "Generate a Protected JSON Fargate Task Definition"
description: "Returns a protected Fargate task definition given an unprotected task definition."
sidebar_label: "Generate a Protected JSON Fargate Task Definition"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: compute/api/32-03/prisma-cloud-compute-api
custom_edit_url: null
show_extensions: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import Heading from "@theme/Heading";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Generate a Protected JSON Fargate Task Definition</h1>

<MethodEndpoint method={"post"} path={"/api/v32.03/defenders/fargate.json"}></MethodEndpoint>



```
x-prisma-cloud-target-env: {"permission":"manageDefenders","saas":true,"self-hosted":true}
x-public: true
```



Returns a protected Fargate task definition given an unprotected task definition.

### cURL Request
Refer to the following example cURL command:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.json`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/json' \
  -X POST \
  --data-binary "@unprotected.json"
  --output protected.json \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.json?consoleaddr=<HOSTNAME>&defenderType=appEmbedded"
```
Refer to the following example cURL command that accepts the task definition in JSON format for a CloudFormation template:

`<HOSTNAME>` is a single list item from the `/api/v<VERSION>/defenders/names` endpoint.

Unprotected task definition in `unprotected.json`

```bash
$ curl -k \
  -u <USER> \
  -H 'Content-Type: application/json' \
  -X POST \
  --data-binary "@unprotected.json"
  --output protected.json \
  "https://<CONSOLE>/api/v<VERSION>/defenders/fargate.json?cloudFormation=true&consoleaddr=<console_address>&filestemMonitoring=false&interpreter=&project=Central+Console"
```

### cURL Response
New Protected task will be in `protected.json`

## Request

<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"description":"ConsoleAddr is the remote console address.\n","in":"query","name":"consoleaddr","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderType is the type of the defender to create the install bundle for.\n","in":"query","name":"defenderType","schema":{"description":"Type is the type to be given at startup","enum":[["none","docker","dockerWindows","containerdWindows","swarm","daemonset","serverLinux","serverWindows","cri","fargate","appEmbedded","tas","tasWindows","serverless","ecs"]],"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"Interpreter is a custom interpreter set by the user to run the fargate defender entrypoint script.\n","in":"query","name":"interpreter","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"CloudFormation indicates if the given fargate task definition is in Cloud Formation format.\n","in":"query","name":"cloudFormation","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"FilesystemMonitoring is the filesystem monitoring flag.\n","in":"query","name":"filesystemMonitoring","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"ExtractEntrypoint indicates if entrypoint will be extracted automatically.\n","in":"query","name":"extractEntrypoint","schema":{"type":"boolean"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryType is the registry type for fetching image details needed to create fargate task definition (e.g., dockerhub).\n","in":"query","name":"registryType","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"RegistryCredentialID of the credentials in the credentials store to use for authenticating with the registry.\n","in":"query","name":"registryCredentialID","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImage is the full path to the Defender image, if not specified Prisma's private registry is used.\n","in":"query","name":"defenderImage","schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"description":"DefenderImagePullSecret is the name of the secret required to pull the Defender image from private registry.\n","in":"query","name":"defenderImagePullSecret","schema":{"type":"string"}}}></ParamsItem></ul></div></details><MimeTabs className={"openapi-tabs__mime"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem name={"property name*"} required={false} schemaName={"string (string)"} qualifierMessage={undefined} schema={{"type":"string","title":"string"}} collapsible={false} discriminator={false}></SchemaItem></ul></details></TabItem></MimeTabs><div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>

FargateTask represents the generic fargate task AWS template

</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem name={"property name*"} required={false} schemaName={"string (string)"} qualifierMessage={undefined} schema={{"type":"string","title":"string"}} collapsible={false} discriminator={false}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"default"} value={"default"}><div></div><div></div></TabItem></ApiTabs></div></div>
      