---
id: postatpreportsbatchmode
sidebar_label: Request Advanced Threat Prevention Report in Batch Mode
hide_title: true
hide_table_of_contents: true
api: {"description":"A POST request to retrieve the ATP report by report id in batch mode. Batch limit is 100 entries.\n\nGet one or more ATP reports.\nUser must provide **one or more** report IDs in request body.\n","operationId":"postatpreportsbatchmode","requestBody":{"content":{"application/json":{"schema":{"example":{"id":["c25b5d86d8ac77e10376000517491157a07ac008bfc799f08795d59c57e23a50","a23b5d46d6ac77e70376080517991187a07ac008bfc799f08795d59c57e23a50"]},"properties":{"id":{"description":"Provides the ATP report by matching the report id of the customer.\n\n---\n```\ncurl -v -X POST -H 'X-API-KEY: API_KEY' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\"id\": [\"c25b5d86d8ac77e10376000517491157a07ac008bfc799f08795d59c57e23a50\", \"a23b5d46d6ac77e70376080517991187a07ac008bfc799f08795d59c57e23a50\"]}' \\\n  'https://api.threatvault.paloaltonetworks.com/service/v1/atp/reports'\n```\n","items":{"type":"string"},"type":"array"}},"type":"object"}}},"required":true},"responses":{"200":{"description":"Request succeeded","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"The response status.","example":true},"data":{"type":"array","description":"The data of the response.\n","items":{"type":"object","properties":{"report_id":{"type":"string","description":"The id of the ATP report.","example":"c25b5d86d8ac77e10376000517491157a07ac008bfc799f08795d59c57e23a50"},"err_msg":{"type":"string","description":"Any error message related to the report.","example":"Error"},"panos_info":{"type":"object","description":"All related PAN-OS information.","properties":{"fw_hostname":{"type":"string","description":"Firewall Hostname.","example":"fw-1"},"fw_addr_v4":{"type":"string","description":"Firewall MP interface IPv4.","example":"10.0.0.0"},"fw_addr_v6":{"type":"string","description":"Firewall MP interface IPv6. (Can be empty)","example":"2001:0db8:85a3:0000:0000:8a2e:0370:7334"},"fw_app_version":{"type":"string","description":"Firewall Content package version.","example":"8527-12345"},"fw_sw_version":{"type":"string","description":"Firewall PANOS version.","example":"10.2.1"},"fw_serial":{"type":"string","description":"Firewall Serial Number.","example":"000000000000001"},"fw_model":{"type":"string","description":"Firewall model.","example":"PA-VM"}}},"session_info":{"type":"object","description":"All related session information.","properties":{"session_id":{"type":"string","description":"Session ID.","example":"123456"},"session_timestamp":{"type":"string","description":"Session timestamp.","example":"2022-04-11T10:00:00.740261097-07:00"},"flow_info":{"type":"object","properties":{"saddr":{"type":"string","description":"Session source IP address.","example":"1.1.1.1"},"daddr":{"type":"string","description":"Session destination IP address.","example":"1.1.1.2"},"sport":{"type":"string","description":"Session source IP port.","example":"49234"},"dport":{"type":"string","description":"Session destination IP port.","example":"80"},"data_type":{"type":"string","enum":["http","ssl","unknown-tcp","unknown-udp"],"description":"The payload type.","example":"http"}}}}},"transaction_data":{"type":"object","description":"The list of transactions of the session. One session may have one or many transactions.","properties":{"transaction_id":{"type":"string","description":"The transaction id.","example":"0"},"payload_sha256":{"type":"string","description":"The SHA256 hash value of the payload.","example":"a15e20ddc3a0850b64cdc87a23230b51466f9879345435973ce360e80e1f670e"},"reports":{"type":"array","description":"The list of detection service reports.","items":{"type":"object","properties":{"ds_name":{"type":"string","description":"The detection service name.","example":"mlc2-http-ids"},"ds_report":{"type":"object","description":"The list of detection service reports.","properties":{"payload_info":{"type":"object","description":"Optional payload information.","example":{}},"malware_families":{"type":"object","description":"The list of malware families.","properties":{"malware_family_type":{"type":"string","description":"The name/type of the malware family.","example":""},"confidence":{"type":"string","description":"The confidence value.","example":"0.85"}},"example":{}}}},"status":{"type":"string","description":"A flag to indicate the report is ready or not.","example":"ok"}}}}}}}}},"message":{"type":"string","description":"Generic response message.","example":"Successful"}}}}},"headers":{"X-Day-RateLimit-Limit":{"description":"The maximum number of requests that the user is permitted to make per day.","example":2000,"schema":{"type":"integer"}},"X-Day-RateLimit-Remaining":{"description":"The number of requests remaining in the current rate limit window (one day).","schema":{"type":"integer"}},"X-Day-RateLimit-Reset":{"description":"The epoch timestamp at which the current rate limit window (one day) resets.","schema":{"type":"integer"}},"X-Minute-RateLimit-Limit":{"description":"The maximum number of requests that the user is permitted to make per minute.","example":200,"schema":{"type":"integer"}},"X-Minute-RateLimit-Remaining":{"description":"The number of requests remaining in the current rate limit window (one minute).","schema":{"type":"integer"}},"X-Minute-RateLimit-Reset":{"description":"The epoch timestamp at which the current rate limit window (one minute) resets.","schema":{"type":"integer"}}}},"4XX":{"content":{"application/json":{"schema":{"properties":{"message":{"description":"Generic response message.","example":"Error message.","type":"string"},"success":{"description":"The response status.","example":false,"type":"boolean"}},"type":"object"}}},"description":"Client related error response"},"5XX":{"content":{"application/json":{"schema":{"properties":{"message":{"description":"Generic response message.","example":"Error message.","type":"string"},"success":{"description":"The response status.","example":false,"type":"boolean"}},"type":"object"}}},"description":"Server related error response"}},"security":[{"X-API-KEY":[]}],"tags":["Advanced Threat Prevention"],"method":"post","path":"/atp/reports","servers":[{"url":"https://api.threatvault.paloaltonetworks.com/service/v1"}],"jsonRequestBodyExample":{"id":["c25b5d86d8ac77e10376000517491157a07ac008bfc799f08795d59c57e23a50","a23b5d46d6ac77e70376080517991187a07ac008bfc799f08795d59c57e23a50"]},"info":{"version":"1.0","contact":{},"description":"\nThe Advanced Threat Prevention API endpoints require an active subscription to the Advanced Threat Prevention security service. These endpoints can only be accessed using the API key associated with the account that holds the subscription. Attempting to view an unauthorized report ID will not return any results.\n\nList of Advanced Threat Prevention API endpoints:\n1. Link to [Request Advanced Threat Prevention cloud analysis report](advanced-threat-prevention#operation/postatpreportsbatchmode)\n2. Link to [Request Advanced Threat Prevention cloud analysis report PCAP](advanced-threat-prevention#operation/getatppcaps)\n","title":"Advanced Threat Prevention"},"postman":{"name":"Request Advanced Threat Prevention Report in Batch Mode","description":{"content":"A POST request to retrieve the ATP report by report id in batch mode. Batch limit is 100 entries.\n\nGet one or more ATP reports.\nUser must provide **one or more** report IDs in request body.\n","type":"text/plain"},"url":{"path":["atp","reports"],"host":["{{baseUrl}}"],"query":[],"variable":[]},"header":[{"key":"Content-Type","value":"application/json"},{"key":"Accept","value":"application/json"}],"method":"POST","body":{"mode":"raw","raw":"\"\"","options":{"raw":{"language":"json"}}}}}
sidebar_class_name: "post api-method"
info_path: docs/cdss/threat-vault/api/advanced-threat-prevention
---

import ApiTabs from "@theme/ApiTabs";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem"
import SchemaTabs from "@theme/SchemaTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import TabItem from "@theme/TabItem";

## Request Advanced Threat Prevention Report in Batch Mode



A POST request to retrieve the ATP report by report id in batch mode. Batch limit is 100 entries.

Get one or more ATP reports.
User must provide **one or more** report IDs in request body.


<MimeTabs><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Request Body</strong><strong style={{"fontSize":"var(--ifm-code-font-size)","color":"var(--openapi-required)"}}> required</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"id"} required={false} schemaDescription={"Provides the ATP report by matching the report id of the customer.\n\n---\n```\ncurl -v -X POST -H 'X-API-KEY: API_KEY' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\"id\": [\"c25b5d86d8ac77e10376000517491157a07ac008bfc799f08795d59c57e23a50\", \"a23b5d46d6ac77e70376080517991187a07ac008bfc799f08795d59c57e23a50\"]}' \\\n  'https://api.threatvault.paloaltonetworks.com/service/v1/atp/reports'\n```\n"} schemaName={"string[]"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></ul></details></TabItem></MimeTabs><div><ApiTabs><TabItem label={"200"} value={"200"}><div>

Request succeeded

</div><details style={{"textAlign":"left","marginBottom":"1rem"}} data-collaposed={false} open={true}><summary style={{}}><strong>Response Headers</strong></summary><ul style={{"marginLeft":"1rem"}}><li class={"schemaItem"}><summary style={{}}><strong>X-Day-RateLimit-Limit</strong><span style={{"opacity":"0.6"}}> integer</span></summary><div><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>Example: 2000

The maximum number of requests that the user is permitted to make per day.

</div></div></li><li class={"schemaItem"}><summary style={{}}><strong>X-Day-RateLimit-Remaining</strong><span style={{"opacity":"0.6"}}> integer</span></summary><div><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

The number of requests remaining in the current rate limit window (one day).

</div></div></li><li class={"schemaItem"}><summary style={{}}><strong>X-Day-RateLimit-Reset</strong><span style={{"opacity":"0.6"}}> integer</span></summary><div><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

The epoch timestamp at which the current rate limit window (one day) resets.

</div></div></li><li class={"schemaItem"}><summary style={{}}><strong>X-Minute-RateLimit-Limit</strong><span style={{"opacity":"0.6"}}> integer</span></summary><div><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>Example: 200

The maximum number of requests that the user is permitted to make per minute.

</div></div></li><li class={"schemaItem"}><summary style={{}}><strong>X-Minute-RateLimit-Remaining</strong><span style={{"opacity":"0.6"}}> integer</span></summary><div><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

The number of requests remaining in the current rate limit window (one minute).

</div></div></li><li class={"schemaItem"}><summary style={{}}><strong>X-Minute-RateLimit-Reset</strong><span style={{"opacity":"0.6"}}> integer</span></summary><div><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

The epoch timestamp at which the current rate limit window (one minute) resets.

</div></div></li></ul></details><div><MimeTabs groupId={"mime-type"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs groupId={"schema-tabs"}><TabTtem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"success"} required={false} schemaDescription={"The response status."} schemaName={"boolean"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>data</strong><span style={{"opacity":"0.6"}}> object[]</span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

The data of the response.


</div><SchemaItem collapsible={false} name={"report_id"} required={false} schemaDescription={"The id of the ATP report."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"err_msg"} required={false} schemaDescription={"Any error message related to the report."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>panos_info</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

All related PAN-OS information.

</div><SchemaItem collapsible={false} name={"fw_hostname"} required={false} schemaDescription={"Firewall Hostname."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"fw_addr_v4"} required={false} schemaDescription={"Firewall MP interface IPv4."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"fw_addr_v6"} required={false} schemaDescription={"Firewall MP interface IPv6. (Can be empty)"} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"fw_app_version"} required={false} schemaDescription={"Firewall Content package version."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"fw_sw_version"} required={false} schemaDescription={"Firewall PANOS version."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"fw_serial"} required={false} schemaDescription={"Firewall Serial Number."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"fw_model"} required={false} schemaDescription={"Firewall model."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>session_info</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

All related session information.

</div><SchemaItem collapsible={false} name={"session_id"} required={false} schemaDescription={"Session ID."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"session_timestamp"} required={false} schemaDescription={"Session timestamp."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>flow_info</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"saddr"} required={false} schemaDescription={"Session source IP address."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"daddr"} required={false} schemaDescription={"Session destination IP address."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"sport"} required={false} schemaDescription={"Session source IP port."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"dport"} required={false} schemaDescription={"Session destination IP port."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"data_type"} required={false} schemaDescription={"The payload type."} schemaName={"string"} qualifierMessage={"**Possible values:** [`http`, `ssl`, `unknown-tcp`, `unknown-udp`]"} defaultValue={undefined}></SchemaItem></div></details></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>transaction_data</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

The list of transactions of the session. One session may have one or many transactions.

</div><SchemaItem collapsible={false} name={"transaction_id"} required={false} schemaDescription={"The transaction id."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"payload_sha256"} required={false} schemaDescription={"The SHA256 hash value of the payload."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>reports</strong><span style={{"opacity":"0.6"}}> object[]</span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

The list of detection service reports.

</div><SchemaItem collapsible={false} name={"ds_name"} required={false} schemaDescription={"The detection service name."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>ds_report</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

The list of detection service reports.

</div><SchemaItem collapsible={false} name={"payload_info"} required={false} schemaDescription={"Optional payload information."} schemaName={"object"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>malware_families</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

The list of malware families.

</div><SchemaItem collapsible={false} name={"malware_family_type"} required={false} schemaDescription={"The name/type of the malware family."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"confidence"} required={false} schemaDescription={"The confidence value."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></div></details></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={false} name={"status"} required={false} schemaDescription={"A flag to indicate the report is ready or not."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></div></details></SchemaItem></div></details></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={false} name={"message"} required={false} schemaDescription={"Generic response message."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></ul></details></TabTtem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"4XX"} value={"4XX"}><div>

Client related error response

</div><div><MimeTabs groupId={"mime-type"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs groupId={"schema-tabs"}><TabTtem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"message"} required={false} schemaDescription={"Generic response message."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"success"} required={false} schemaDescription={"The response status."} schemaName={"boolean"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></ul></details></TabTtem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"5XX"} value={"5XX"}><div>

Server related error response

</div><div><MimeTabs groupId={"mime-type"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs groupId={"schema-tabs"}><TabTtem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"message"} required={false} schemaDescription={"Generic response message."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"success"} required={false} schemaDescription={"The response status."} schemaName={"boolean"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></ul></details></TabTtem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div>
      